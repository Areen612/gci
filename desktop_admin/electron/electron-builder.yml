appId: com.gci.desktopadmin
productName: GCI Admin

directories:
  output: dist
  buildResources: build

files:
  - "**/*"

win:
  target:
    - target: nsis
      arch:
        - x64

nsis:
  oneClick: true
  perMachine: false
  allowToChangeInstallationDirectory: false
  deleteAppDataOnUninstall: false
  createDesktopShortcut: true
  createStartMenuShortcut: true
  # DISABLE BLOCKMAP â†’ speeds up build massively
  differentialPackage: false   

extraResources:
  # Bundle only the backend bits needed at runtime
  - from: ../../
    to: gci-backend
    filter:
      - "app/**"
      - "config/**"
      - "database/db.sqlite3"
      - "desktop_admin/**"
      - "static/**"
      - "templates/**"
      - "manage.py"

  # Bundle the Python virtualenv created in CI
  - from: python-win
    to: python

publish: null
generateUpdatesFilesForAllChannels: false