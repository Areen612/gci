appId: com.gci.desktopadmin
productName: GCI Admin

directories:
  output: dist
  buildResources: build

files:
  - "**/*"

win:
  target:
    - target: nsis
      arch:
        - x64

nsis:
  oneClick: true
  perMachine: false
  allowToChangeInstallationDirectory: false
  deleteAppDataOnUninstall: false
  createDesktopShortcut: true
  createStartMenuShortcut: true
  # DISABLE BLOCKMAP â†’ speeds up build massively
  differentialPackage: false   

extraResources:

  # app package
  - from: ../../app
    to: gci-backend/app

  # project config (settings, urls, wsgi, etc.)
  - from: ../../config
    to: gci-backend/config

  # sqlite database
  - from: ../../database
    to: gci-backend/database
    filter: |
      db.sqlite3

  # desktop_admin (includes admin_server.py)
  - from: ../../desktop_admin
    to: gci-backend/desktop_admin

  # static files
  - from: ../../static
    to: gci-backend/static

  # templates
  - from: ../../templates
    to: gci-backend/templates

  # manage.py
  - from: ../../manage.py
    to: gci-backend/manage.py

  # ---- Bundled Python virtualenv created in CI ----
  - from: python-win
    to: python

publish: null
generateUpdatesFilesForAllChannels: false