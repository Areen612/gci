{% extends 'base.html' %}
{% block title %}{{ item.name }}{% endblock %}
{% block content %}
<h2>{{ item.name }}</h2>
<p><strong>SKU:</strong> {{ item.sku }}</p>
<p><strong>Category:</strong> {{ item.category }}</p>
<p><strong>Stock on hand:</strong> {{ item.stock_on_hand }}</p>
<p><strong>Reorder level:</strong> {{ item.reorder_level }}</p>
<p><strong>Reorder quantity:</strong> {{ item.reorder_quantity }}</p>
<p><strong>Status:</strong> {{ item.is_active|yesno:'Active,Inactive' }}</p>
<p><strong>Description:</strong> {{ item.description|default:'—' }}</p>
<div class="actions">
    <a href="{% url 'inventory:item-update' item.pk %}">Edit</a>
    <a href="{% url 'inventory:adjustment-create' item.pk %}">Adjust stock</a>
    <a href="{% url 'inventory:item-delete' item.pk %}">Delete</a>
    <a href="{% url 'inventory:adjustment-history' item.pk %}">View history</a>
</div>
<h3>Recent Adjustments</h3>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Change</th>
            <th>Resulting quantity</th>
            <th>Reason</th>
            <th>Recorded by</th>
        </tr>
    </thead>
    <tbody>
        {% for adjustment in adjustments|slice:':5' %}
            <tr>
                <td>{{ adjustment.created_at|date:'Y-m-d H:i' }}</td>
                <td>{{ adjustment.quantity_change }}</td>
                <td>{{ adjustment.resulting_quantity }}</td>
                <td>{{ adjustment.reason }}</td>
                <td>{{ adjustment.created_by|default:'—' }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="5">No adjustments recorded yet.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
